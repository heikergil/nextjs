name: capture-url
on: deployment_status

jobs:
   E2E-Tests:
    if: github.event.deployment_status.state == 'success' 
    timeout-minutes: 30
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
    - uses: actions/setup-node@v2
      with:
        node-version: '18.x'

    - shell: bash
      run: |
       echo ${{ github.event.deployment_status.target_url }} > preview_url.txt
    - name: Upload url
      uses: actions/upload-artifact@v3
      with:
        name: capture_url
        path: preview_url.txt

    - name: Upload math result for job 2
      uses: actions/upload-artifact@v3
      with:
        name: capture_url
        path: preview_url.txt

    - name: Download math result for job 2
      uses: actions/download-artifact@v3
      with:
        name: capture_url
    - name: Print the final result
      shell: bash
      run: |
        value=`cat preview_url.txt`
        echo The result is $value   
    
 
 
    
